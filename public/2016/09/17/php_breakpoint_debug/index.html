<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="LCJ"><meta name="description" content="最近不仅换厂了，连开发方向都换了，从事PHP开发去了。接下来的博客内容可能会以web开发为主了，如果有时间研究iOS也是极好的。这篇东西主要想记录一下我在配置PHP断点调试遇到的一些坑（仅仅记录我遇到的）。安装XDebug获取相应版本XDebug步骤:复制phpinfo"><meta name="keywords" content=""><title>PHP开发：Mac 下 PHPStorm + XDebug 断点调试 · luocj’s blog</title><link rel="icon" href="/1493.jpg"><link rel="canonical" href="http://cnluocj.com/2016/09/17/php_breakpoint_debug/"><link rel="alternate" href="/atom.xml" title="luocj’s blog"><link rel="stylesheet" href="/fonts/iconfont/iconfont.css"><link rel="stylesheet" href="/css/style.css"><script type="text/javascript">var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?Your baidu Analytics ID";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script type="text/javascript">(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'Your Google Analytics ID', 'auto');
ga('send', 'pageview');</script></head><body><div id="main"><header><!--a.logo(href=url_for('.'))--><!--  = config.title--><ul class="nav"><li class="nav-link"><a href="/" target="_self">Home</a></li><li class="nav-link"><a href="/archives/" target="_self">Archives</a></li></ul></header><section id="container"><article class="post"><h1 class="post-title">PHP开发：Mac 下 PHPStorm + XDebug 断点调试</h1><span class="post-time">Sep 17, 2016</span><div id="sidebar" class="post-sidebar"><h3 class="heading">Contents</h3><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#安装XDebug"><span class="toc-text">安装XDebug</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#坑1"><span class="toc-text">坑1:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#坑2"><span class="toc-text">坑2:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#坑3"><span class="toc-text">坑3:</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#配置XDebug"><span class="toc-text">配置XDebug</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#检验安装配置是否成功"><span class="toc-text">检验安装配置是否成功</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PHPStorm中配置XDebug"><span class="toc-text">PHPStorm中配置XDebug</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#配置端口"><span class="toc-text">配置端口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#配置servers"><span class="toc-text">配置servers</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#配置debug"><span class="toc-text">配置debug</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参考资料"><span class="toc-text">参考资料</span></a></li></ol></div><div class="post-content"><p>最近不仅换厂了，连开发方向都换了，从事PHP开发去了。</p>
<p>接下来的博客内容可能会以web开发为主了，如果有时间研究iOS也是极好的。</p>
<p>这篇东西主要想记录一下我在配置PHP断点调试遇到的一些坑（仅仅记录我遇到的）。</p>
<h2 id="安装XDebug"><a href="#安装XDebug" class="headerlink" title="安装XDebug"></a>安装XDebug</h2><p>获取相应版本XDebug步骤:</p>
<ol>
<li>复制phpinfo()打印出来的页面(<code>command+a</code>, <code>command+c</code>);</li>
<li>浏览器打开网址<a href="https://xdebug.org/wizard.php" target="_blank" rel="external">https://xdebug.org/wizard.php</a></li>
<li>把刚才复制的phpinfo内容粘贴到页面的输入框中(<code>command+v</code>)，然后点击下方<code>Analyse my phpinfo() output</code>按钮;</li>
</ol>
<a id="more"></a>
<p>接下来会得到以下页面（不同机子，不同版本可能得到的内容不一样，仅记录我获得的）</p>
<p><img src="http://oaayo42x2.bkt.clouddn.com/2016-09-18-3E683CD6-B144-4D83-8A41-5A41F0B12E68.png" alt=""></p>
<p>页面上显示了对本机配置的描述<code>SUMMARY</code>，还有针对此配置的安装<code>XDebug</code>的详细步骤<code>INSTRUCTIONS</code>（巨详细，但是有几个坑）。</p>
<p>按照给出的步骤一步一步往下走，一个一个坑的踩。</p>
<h3 id="坑1"><a href="#坑1" class="headerlink" title="坑1:"></a>坑1:</h3><p>第二步，解压缩的时候，按照上面的指令去解压，不要在图形界面上解压。</p>
<h3 id="坑2"><a href="#坑2" class="headerlink" title="坑2:"></a>坑2:</h3><p>第四部，运行命令<code>phpize</code>的时候报错如下:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">/usr/local/Cellar/php70/7.0.10_1/bin/phpize: line 61: /usr/local/Library/Homebrew/shims/super/sed: No such file or directory</div><div class="line">/usr/local/Cellar/php70/7.0.10_1/bin/phpize: line 62: /usr/local/Library/Homebrew/shims/super/sed: No such file or directory</div><div class="line">/usr/local/Cellar/php70/7.0.10_1/bin/phpize: line 63: /usr/local/Library/Homebrew/shims/super/sed: No such file or directory</div><div class="line">Configuring for:</div><div class="line">PHP Api Version:</div><div class="line">Zend Module Api No:</div><div class="line">Zend Extension Api No:</div><div class="line">/usr/local/Cellar/php70/7.0.10_1/bin/phpize: line 155: /usr/local/Library/Homebrew/shims/super/sed: No such file or directory</div><div class="line">Cannot find autoconf. Please check your autoconf installation and the</div><div class="line">$PHP_AUTOCONF environment variable. Then, rerun this script.</div></pre></td></tr></table></figure>
<p>报错主要说明了两个问题，一个是在指定路径上<code>sed</code>命令没找到，另一个是<code>Cannot find autoconf</code>。</p>
<p>填坑:</p>
<ol>
<li>发现<code>sed</code>在<code>/usr/local/Homebrew/Library/Homebrew/shims/super/sed</code>路径上，把找到的<code>sed</code>文件复制到指定路径上，也就是上面的<code>/usr/local/Library/Homebrew/shims/super/sed</code>。</li>
<li>缺少<code>autoconf</code>，缺少那就安装，使用<code>Homebrew</code>安装，在命令行键入<code>brew install autoconf</code></li>
</ol>
<h3 id="坑3"><a href="#坑3" class="headerlink" title="坑3:"></a>坑3:</h3><p>第七步与第八步路径不一样，或者说第七步路径缺少了一部分！！</p>
<p>填坑：</p>
<p>把第七步命令上的路径按照第八步的路径补全</p>
<p><code>cp modules/xdebug.so /usr/local/Cellar/php70/7.0.10_1/lib/php/extensions/no-debug-non-zts-20151012/xdebug.so</code></p>
<h2 id="配置XDebug"><a href="#配置XDebug" class="headerlink" title="配置XDebug"></a>配置XDebug</h2><p>在<code>php.ini</code>文件末尾添加如下代码:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">zend_extension = /usr/local/Cellar/php70/7.0.10_1/lib/php/extensions/no-debug-non-zts-20151012/xdebug.so</div><div class="line">xdebug.idekey=PhpStorm</div><div class="line">xdebug.remote_enable = On</div><div class="line">xdebug.remote_host=localhost</div><div class="line">xdebug.remote_port=9001</div><div class="line">xdebug.remote_mode=req</div><div class="line">xdebug.remote_handler=dbgp</div></pre></td></tr></table></figure>
<p>由于端口<code>9000</code>被占用了，我改用了<code>9001</code>。</p>
<p>什么？找不到<code>php.ini</code>文件?</p>
<p>好吧，再次打开<code>phpinfo</code></p>
<p><img src="http://oaayo42x2.bkt.clouddn.com/2016-09-18-DingTalk20160918180407.png" alt=""></p>
<p>配置完成，重启webserver，php-fpm。</p>
<h2 id="检验安装配置是否成功"><a href="#检验安装配置是否成功" class="headerlink" title="检验安装配置是否成功"></a>检验安装配置是否成功</h2><p>重新打开<code>phpinfo</code>页面，看到下图这个，说明安装成功</p>
<p><img src="http://oaayo42x2.bkt.clouddn.com/2016-09-18-QQ20160918-0.png" alt=""></p>
<p>或者命令行键入<code>php -m</code>，拉到最后看是否有<code>XDebug</code></p>
<p><img src="http://oaayo42x2.bkt.clouddn.com/2016-09-18-QQ20160918-1.png" alt=""></p>
<h2 id="PHPStorm中配置XDebug"><a href="#PHPStorm中配置XDebug" class="headerlink" title="PHPStorm中配置XDebug"></a>PHPStorm中配置XDebug</h2><h3 id="配置端口"><a href="#配置端口" class="headerlink" title="配置端口"></a>配置端口</h3><p>里面的<code>debug port</code>必须要与刚才<code>php.ini</code>配置的<code>remote_port</code>保持一致。</p>
<p><img src="http://oaayo42x2.bkt.clouddn.com/2016-09-18-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-09-18%20%E4%B8%8B%E5%8D%886.21.59.png" alt=""></p>
<h3 id="配置servers"><a href="#配置servers" class="headerlink" title="配置servers"></a>配置servers</h3><p><img src="http://oaayo42x2.bkt.clouddn.com/2016-09-18-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-09-18%20%E4%B8%8B%E5%8D%886.27.07.png" alt=""></p>
<h3 id="配置debug"><a href="#配置debug" class="headerlink" title="配置debug"></a>配置debug</h3><p><img src="http://oaayo42x2.bkt.clouddn.com/2016-09-18-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-09-18%20%E4%B8%8B%E5%8D%886.30.31.png" alt=""></p>
<p><img src="http://oaayo42x2.bkt.clouddn.com/2016-09-18-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-09-18%20%E4%B8%8B%E5%8D%887.07.06.png" alt=""></p>
<p>配置好后，点击 <img src="http://oaayo42x2.bkt.clouddn.com/2016-09-18-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-09-18%20%E4%B8%8B%E5%8D%886.32.55.png" alt=""> 这个按钮，开始debug，别忘了打断点哦！</p>
<p><img src="http://oaayo42x2.bkt.clouddn.com/2016-09-18-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-09-18%20%E4%B8%8B%E5%8D%886.35.59.png" alt=""></p>
<p>可以断点了，大功告成！</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="http://wlb.wlb.blog.163.com/blog/static/46741320153252810689/" target="_blank" rel="external">PHPStorm+XDebug进行调试</a></p>
<p>以上。</p>
</div></article><div class="tags"></div><div class="paginator"><a href="/2016/09/30/cow/" class="prev"><i class="iconfont icon-left"></i><span> Prev</span></a><a href="/2016/07/25/Message_Forwarding/" class="next"><span>Next</span><i class="iconfont icon-right"></i></a></div><section id="comments"><div data-thread-key="http://cnluocj.com/2016/09/17/php_breakpoint_debug/index.html" data-title="PHP开发：Mac 下 PHPStorm + XDebug 断点调试" data-url="http://cnluocj.com/2016/09/17/php_breakpoint_debug/index.html" class="ds-thread"></div><script type="text/javascript">var duoshuoQuery = {short_name: "bt67123" };
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
})();</script></section></section><footer><div class="copyright"><p class="power">Powered by <a href="https://hexo.io/">Hexo</a> and Theme by <a href="https://github.com/ahonn/hexo-theme-even"> Even</a></p><p class="since">&copy;2016<span class="heart"><i class="iconfont icon-heart"></i></span><span class="author">LCJ</span></p></div><label id="back2top"><i class="iconfont icon-up"></i></label></footer></div><script src="/js/zepto.min.js"></script><script src="/js/theme.js"></script></body></html>