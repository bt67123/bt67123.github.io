<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="LCJ"><meta name="description"><title>luocj’s blog</title><link rel="icon" href="/1493.jpg"><link rel="canonical" href="http://cnluocj.com/"><link rel="alternate" href="/atom.xml" title="luocj’s blog"><link rel="stylesheet" href="/fonts/iconfont/iconfont.css"><link rel="stylesheet" href="/css/style.css"><script type="text/javascript">var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?Your baidu Analytics ID";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script type="text/javascript">(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'Your Google Analytics ID', 'auto');
ga('send', 'pageview');</script></head><body><div id="main"><header><!--a.logo(href=url_for('.'))--><!--  = config.title--><ul class="nav"><li class="nav-link"><a href="/" class="active">Home</a></li><li class="nav-link"><a href="/archives/" target="_self">Archives</a></li></ul></header><section id="container"><ul class="home"><li class="post-item"><article class="post"><h2 class="post-title"><a href="/2016/09/30/cow/" class="post-link">COW：一个智能的HTTP代理服务器</a></h2><span class="post-time">Sep 30, 2016</span><div class="post-content"><p>国庆将近，同志们只希望尽快为祖国庆生，以至于没心思工作（微笑）。</p>
<p>既然是这样就利用这个时间来记录一个最近才发现的一个小工具。</p>
<p>介绍小工具前先说说我的科学上网工具</p>
<h2 id="Shadowsocks"><a href="#Shadowsocks" class="headerlink" title="Shadowsocks"></a>Shadowsocks</h2><blockquote>
<p>shadowsocks 是一个可穿透防火墙的快速代理。通过客户端以指定的密码、加密方式和端口连接服务器，成功连接到服务器后，客户端在用户的电脑上构建一个本地 socks5 代理。使用时将流量分到本地 socks5 代理，客户端将自动加密并转发流量到服务器，服务器以同样的加密方式将流量回传给客户端，以此实现代理上网。</p>
</blockquote>
<p>我现在是用 <a href="https://github.com/shadowsocks/shadowsocks/wiki/Shadowsocks-%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E">shadowsocks</a> 来科学上网的，ss 相比传统 VPN 来说好用不少，就是需要装客户端。ss 帐号可以网上买，也可以自己搭一个 ss 服务器，我自己就搭了一个。</p>
<p>装上 ss 客户端之后有两种上网模式，一个是自动代理模式，一个是全局模式，全局模式很容易理解，就是无论访问什么网站都会使用代理访问，而自动代理模式就是选择性使用代理，这个是比 VPN 爽的地方，因为 ss 已经自动给你生成了 pac 文件了，里面定义了一系列的访问规则。</p></div><a href="/2016/09/30/cow/" class="read-more">Read more..</a></article></li><li class="post-item"><article class="post"><h2 class="post-title"><a href="/2016/09/17/php_breakpoint_debug/" class="post-link">PHP开发：Mac 下 PHPStorm + XDebug 断点调试</a></h2><span class="post-time">Sep 17, 2016</span><div class="post-content"><p>最近不仅换厂了，连开发方向都换了，从事PHP开发去了。</p>
<p>接下来的博客内容可能会以web开发为主了，如果有时间研究iOS也是极好的。</p>
<p>这篇东西主要想记录一下我在配置PHP断点调试遇到的一些坑（仅仅记录我遇到的）。</p>
<h2 id="安装XDebug"><a href="#安装XDebug" class="headerlink" title="安装XDebug"></a>安装XDebug</h2><p>获取相应版本XDebug步骤:</p>
<ol>
<li>复制phpinfo()打印出来的页面(<code>command+a</code>, <code>command+c</code>);</li>
<li>浏览器打开网址<a href="https://xdebug.org/wizard.php">https://xdebug.org/wizard.php</a></li>
<li>把刚才复制的phpinfo内容粘贴到页面的输入框中(<code>command+v</code>)，然后点击下方<code>Analyse my phpinfo() output</code>按钮;</li>
</ol></div><a href="/2016/09/17/php_breakpoint_debug/" class="read-more">Read more..</a></article></li><li class="post-item"><article class="post"><h2 class="post-title"><a href="/2016/07/25/Message_Forwarding/" class="post-link">Objective-C - 利用动态消息转发实现代理转发</a></h2><span class="post-time">Jul 25, 2016</span><div class="post-content"><h2 id="Runtime"><a href="#Runtime" class="headerlink" title="Runtime ?"></a>Runtime ?</h2><p>Runtime 是 Objective-C 区别于 C 语言这样的静态语言的一个非常重要的特性。对于 C 语言，函数的调用会在编译期就已经决定好，在编译完成后直接顺序执行。但是 OC 是一门动态语言，函数调用变成了消息发送，在编译期不能知道要调用哪个函数。所以 Runtime 无非就是去解决如何在运行时期找到调用方法这样的问题。</p>
<h2 id="动态消息转发"><a href="#动态消息转发" class="headerlink" title="动态消息转发"></a>动态消息转发</h2><p>由于OC有Runtime这一重要特性，使得动态消息转发(Message Forwarding)成为了可能。</p></div><a href="/2016/07/25/Message_Forwarding/" class="read-more">Read more..</a></article></li><li class="post-item"><article class="post"><h2 class="post-title"><a href="/2016/07/15/AVFoundation_watermark/" class="post-link">iOS开发：如何在视频中添加水印</a></h2><span class="post-time">Jul 15, 2016</span><div class="post-content"><p>先上个图</p>
<p><img src="http://oaayo42x2.bkt.clouddn.com/watermark_gif.gif" alt="image"></p>
<h3 id="一-根据AVAsset得到AVMutableComposition"><a href="#一-根据AVAsset得到AVMutableComposition" class="headerlink" title="一. 根据AVAsset得到AVMutableComposition"></a>一. 根据AVAsset得到AVMutableComposition</h3><p>从asset中取得视频的音视频轨道：<br><figure class="highlight objc"><table><tr><td class="code"><pre><div class="line"><span class="built_in">AVAssetTrack</span> *assetVideoTrack = <span class="literal">nil</span>;</div><div class="line"><span class="built_in">AVAssetTrack</span> *assetAudioTrack = <span class="literal">nil</span>;</div><div class="line"><span class="comment">/**</div><div class="line"> *  判断asset是否有音视频的轨道，并获取</div><div class="line"> */</span></div><div class="line"><span class="keyword">if</span> ([[_asset tracksWithMediaType:<span class="built_in">AVMediaTypeVideo</span>] count] != <span class="number">0</span>) &#123;</div><div class="line">    assetVideoTrack = [[_asset tracksWithMediaType:<span class="built_in">AVMediaTypeVideo</span>] objectAtIndex:<span class="number">0</span>];</div><div class="line">&#125;</div><div class="line"><span class="keyword">if</span> ([[_asset tracksWithMediaType:<span class="built_in">AVMediaTypeAudio</span>] count] != <span class="number">0</span>) &#123;</div><div class="line">    assetAudioTrack = [[_asset tracksWithMediaType:<span class="built_in">AVMediaTypeAudio</span>] objectAtIndex:<span class="number">0</span>];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>使用AVAsset中的<code>tracksWithMediaType:</code> 方法可以获取视频中的音频或视频的轨道。</p></div><a href="/2016/07/15/AVFoundation_watermark/" class="read-more">Read more..</a></article></li><li class="post-item"><article class="post"><h2 class="post-title"><a href="/2016/07/11/block_retain_cycle/" class="post-link">OC中block循环引用</a></h2><span class="post-time">Jul 11, 2016</span><div class="post-content"><h2 id="什么是block循环引用"><a href="#什么是block循环引用" class="headerlink" title="什么是block循环引用"></a>什么是block循环引用</h2><blockquote>
<p>如果在Block中使用附有__strong修饰符的对象类型自动变量，那么当Block从栈复制到堆时，该对象为Block所有。这样容易引起循环引用。</p>
</blockquote>
<p>举个简单的例子<br><figure class="highlight objc"><table><tr><td class="code"><pre><div class="line"><span class="keyword">typedef</span> <span class="keyword">void</span> (^block1) (<span class="keyword">void</span>);</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">ViewController</span> () </span>&#123;</div><div class="line">    block1 _blk;</div><div class="line">&#125;</div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line">@implement ViewController </div><div class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</div><div class="line">    [<span class="keyword">super</span> viewDidLoad];</div><div class="line">    _blk = ^ &#123;</div><div class="line">    	<span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, <span class="keyword">self</span>);</div><div class="line">    &#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)dealloc &#123;</div><div class="line">&#125;</div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure></p>
<p>上面的例子中<code>ViewController</code>对象持有<code>_blk</code>，<code>_blk</code>持有<code>ViewController</code>对象，这样就形成了循环引用。<br>这样会导致<code>dealloc</code>无法被调用，也就是说<code>ViewContrller</code>对象无法被释放。 </p></div><a href="/2016/07/11/block_retain_cycle/" class="read-more">Read more..</a></article></li></ul><div class="paginator"></div></section><footer><div class="social"><a href="/bt67123.github.com" title="github" class="iconfont icon-github"></a><a href="/atom.xml" title="rss" class="iconfont icon-rss"></a></div><div class="copyright"><p class="power">Powered by <a href="https://hexo.io/">Hexo</a> and Theme by <a href="https://github.com/ahonn/hexo-theme-even"> Even</a></p><p class="since">&copy;2016<span class="heart"><i class="iconfont icon-heart"></i></span><span class="author">LCJ</span></p></div><label id="back2top"><i class="iconfont icon-up"></i></label></footer></div><script src="/js/zepto.min.js"></script><script src="/js/theme.js"></script></body></html>